extends layout

block content
  if user
    - var hasDish = dishes.length > 0
    if hasDish
      div.card.my-3
        h3.card-header 料理一覧
        table.table.table-bordered
          tr
            th 料理名
            th 参考URL
            th ジャンル
            th 役割
            th 削除
          each dish in dishes
            tr
              td
                button(type="button", data-toggle="modal", data-target="#"+`${dish.dishId}`).btn.btn-light #{dish.dishName}
                div.modal.fade(id=`${dish.dishId}` tabindex="-1", role="dialog", aria-labelledby="dishModalLabel")
                  div.modal-dialog(role="document")
                    div.modal-content
                      div.modal-header
                        h5.modal-title#dishModalLabel #{dish.dishName}
                        button(type="button", data-dismiss="modal", aria-label="閉じる").close
                          span(aria-hidden="true") &times;
                      div.modal-body
                        div.card.bg-light
                          img(src=`/menu/${dish.dishId}/img/${dish.dishFile}`, alt="画像", height="350").card-img-top
                          div.card-body
                            p.card-text.text-right #{dish.formattedUpdatedAt}
                            a(href=`${dish.dishUrl}`).btn.btn-primary.stretched-link.btn-block #{dish.dishName}のレシピ
                      div.modal-footer
                        a(href=`/menu/${dish.dishId}/edit`).btn.btn-success.my-3 編集する
                        form(method="post", action=`/menu/${dish.dishId}?delete=1`)
                          button(type="submit").btn.btn-danger.my-3 削除する
                        button(type="button", data-dismiss="modal").btn.btn-secondary 閉じる
              - var notset = "(未設定)"
              if dish.dishUrl === notset
                td 未設定
              else
                td
                  a(href=`${dish.dishUrl}`).btn.btn-outline-secondary #{dish.dishName}のレシピ
              td #{dish.dishGenre}
              td #{dish.dishRole}
              td
                form(method="post", action=`/menu/${dish.dishId}?delete=1`)
                  button(type="submit").btn.btn-danger.my-3 削除
      div
      a(href="/menu/new").btn.btn-info.my-3 料理を追加する
    else
      div
      a(href="/menu/new").btn.btn-info.my-3 料理を追加する
  else
    div
      a(href="/login") ログイン